# 正则表达式
正则表达式教程。详细内容和验证见 https://codejiaonang.com/。


## 一、正则表达式入门

###  &diams; 字符组

1. []匹配一组可能出现的字符 

| 要求  | 答案  |
|:----------|:----------|
| 使用字符组匹配Java和 java。    | [Jj]ava   |
| 使用字符组匹配Ruby、Rube、ruby、rube。    | [Rr]ub[ey]    |

### &diams; 区间

1. 要匹配任意数字可以使用[0-9]；
2. 如果想要匹配所有小写字母，可以写成[a-z]；
3. 想要匹配所有大写字母可以写成[A-Z]。

| 要求  | 答案  |
|:----------|:----------|
| 匹配数据所有的数字、小写字母和大写字母。   | [0-9a-zA-Z]   |
| 匹配a-z的小写字母；匹配A-F的大写字母；| [a-zA-F]    |
|前面是a-f的字母后面是0-3之内的数字|[abcdef]*[0123]+|


### &diams; 匹配特殊字符

使用“\”进行转义操作

| 要求  | 答案  |
|:----------|:----------|
| 匹配所有\[\]\(\)-。   | [\\[\\]\\-\\(\\)]  |


### &diams; 取反

可以通过在字符数组开头使用 ^ 字符实现取反操作，匹配任何指定字符之外的所有字符。

| 要求  | 答案  |
|:----------|:----------|
| 匹配爱后面不包含你的数据。  | 爱[^你]  |
|匹配不包含小写字母的数据。|[^a-z]|


### &diams; 快捷匹配数字和字母

\w: 任意单词字符

\d: 任意数字

\s: 任意空白字符，比如空格，tab、换行等。

\b: 单词的边界，仅匹配有边界的这种单词

将小写改成大写可以实现快捷方式取反。

| 要求  | 答案  |
|:----------|:----------|
| 仅匹配有边界的code单词。 | \bcode\b |
| 匹配开头不以字母开头的单词。|\W|


### &diams; 开始和结束

正则表达式中 ^指定的是一个字符串的开始，$指定的是一个字符串的结束。

| 要求  | 答案  |
|:----------|:----------|
| 匹配以OS结尾的字符串。 | OS$ |


### &diams; 任意字符&可选字符 

1. "."字符代表匹配任何单个字符，它只能出现在方括号以外。"."字符只有一个不能匹配的字符，也就是换行符（\n）。

2. 可以使用 "?" 符号指定一个字符、字符组或其他基本单元可选，这意味着正则表达式引擎将会期望该字符出现零次或一次。

3. "+"匹配1个到无数个，使用"*"代表0个到无数个。


| 要求  | 答案  |
|:----------|:----------|
| 任意字母之后是ar的字符串。 | .ar|
|匹配 favorite和favourite这两种写法。|favou?rite|
|匹配codejiaonang的不同写法。|code.?jiaonang|


### &diams; 重复/重复区间/非贪婪模式

1. 在一个字符组后加上{N} 就可以表示在它之前的字符组出现N次。

2. 在一个字符组后加上{M,N}，M是下界而N是上界。

3. 正则表达式默认是贪婪模式，即尽可能的匹配更多字符，而要使用非贪婪模式，我们要在表达式后面加上?号。

| 要求  | 答案  |
|:----------|:----------|
| 匹配所有的电话号码 | \d{3}-\d{5}|
|以3个数字开头，后面7个数字，例如：020-7281333; 以4个数字开头，后面7个数字，例如：0731-8283431|\d{3,4}\-\d{7}|
|必须是11位的数字；第一位数字必须以1开头，第二位数字可以是[3,4,5,7,8]中的任意一个，后面9个数是[0-9]中的任意一个数字。|1[345678][0-9]{9}|
| 匹配以 http开头，以/结尾的所有数据。 |http.*?/$|


### &diams; 实践

| 要求  | 答案  |
|:----------|:----------|
| 匹配电话号码，假设电话号码可以有下列两种方式：0XX-XXXXXXX，例如020-8810456；0XXXXXXXXX，例如0208810456。020 代表区号，8810456是电话号码，区号第一个数字必须是0，电话号码的第一个数字必须大于等于1。 | 0\d{2}-?[1-9]\d{6}|
|匹配所有正确格式的王姓同学数据|^王.* \d{4}|



<br/><br/>
## 二、正则表达式进阶

### &diams; 分组

1. 一般正则表达式用于提取整个匹配，但可以使用“()”提取表达式中的部分内容

| 要求  | 答案  |
|:----------|:----------|
| 提取div中的内容    | 	\<div>(.*?)\</div> |
|使用分组提取\<p> \</p>中的数据|\<p>(.*?)\</p>|
|提取学号，例如：2019-5013-08 2019表示入学年份，5013表示班级代码，08表示班级中的排序|(\d{4}).\*\?(\d{4}).\*\?(\d{2})|
|提取年月日|(\d{4}).\*?(\d{1,2}).\*?(\d{1,2})|


2. 或者条件。使用“｜”进行分割

| 要求  | 答案  |
|:----------|:----------|
| 视频文件的后缀名有 .mp4、.avi、.wmv、.rmvb。请编写正则表达式提取所有的视频文件的后缀。|(.mp4\|.avi\|.wmv\|.rmvb) |


3. 非捕获分组。想用分组的特性，但不捕获分组的内容，使用“(?:表达式)”。

| 要求  | 答案  |
|:----------|:----------|
| 提取目标数据中的电话号码|(?:\d{2}\-\|\d{4}\-\|tel\:)(\d{5}) |


4. 分组的使用技巧

| 要求  | 答案  |
|:----------|:----------|
|提取所有年月日的数据，例如“2020-01-02”，“2020-1-2”，“2020.01.02”，“2020 01 02”，“2020 1 2”，“20200102”，“2020/01/02”|(\d{4})[-.\s/]?(\d{1,2})[-.\s/]?(\d{1,2})|
|分组提取所有的电话号码，例如“2118673676”，“(211)8673676”，“211.867.3676”，“211-867-3676”|[(]?(\d{3})[).-]?(\d{3})[.-]?(\d{4})|


5. 分组的回溯引用。使用\N可以引用编号为N的分组。

| 要求  | 答案  |
|:----------|:----------|
| 提取对应的html标签中的内容，例如“<font>提示<\font>”|<(\w+)>.*?</\1> |
|编写代码匹配符合 ab ba 这种关系的单词|(.+)(.+).*?\2\1|
|匹配超过两个字符重复的数据|(\w{2,})\1|


### &diams; 先行断言

1. 正向先行断言：(?=表达式)，指在某个位置向右看，表示所在位置右侧必须能匹配表达式。
如果要取出喜欢两个字，要求这个喜欢后面有你，这个时候就要这么写：喜欢(?=你)，这就是正向先行断言。

| 要求  | 答案  |
|:----------|:----------|
|匹配的字符串中必须包含至少一个大写和小写的字母。|(?=.\*?[a-z])(?=.\*?[A-Z]).+|
|编写正则表达式进行密码强度的验证，规则如下：（1）至少一个大写字母，（2）至少一个小写字母，（3）至少一个数字，（4）至少8个字符|(?=.\*?[a-z])(?=.\*?[A-Z])(?=.\*?[0-9]).{8,}|



2. 反向先行断言(?!表达式)的作用是保证右边不能出现某字符。

| 要求  | 答案  |
|:----------|:----------|
|匹配不是qq邮箱的数据。|.*?@(?!qq.com)|
|匹配除\<p\>或\</p\>之外的所有标签。|(?!\<p\>)(?!\</p\>)(\<.*\>)|


### &diams; 后行断言

1. 正向后行断言。正向后行断言：(?<=表达式)，指在某个位置向左看，表示所在位置左侧必须能匹配表达式

| 要求  | 答案  |
|:----------|:----------|
|匹配王姓同学的名字。|(?<=王).|

2. 反向后行断言。(?<!表达式)，指在某个位置向左看，表示所在位置左侧不能匹配表达式。

| 要求  | 答案  |
|:----------|:----------|
|使用正则表达式匹配一个$符号中的数据。|(?<!\\$)\$[^\\$]+\\$(?!\\$)|
|匹配所有两个$符号中的数据。|(?<!\\$)\\$\\$[^\\$]+\\$\\$(?!\\$)|


### &diams; 总结与实践

| 要求  | 答案  |
|:----------|:----------|
|提取所有人的生日，使用两个分组，第一个分组提取“月”，第二个分组提取“日”。|.\*? \d{4}.\*?(\d{1,2}).\*?(\d{1,2})|
|匹配所有的小数|^\d+\.\d+$|

